# DynamoDB Example

## Bathroom App Starter Code

### dynamo-bathroom.py
Will setup a table and add the payload data. The problem is the bathroom B data is overwriting bathroom A's data.

### dynamo-query.py
Queries the bathroom db. I do not know the state of this code, but could be used as template or reference.


## Solar Panel Data Example
Stores the amount of energy generated by day, month, year.

* Copy and paste dynamodb-solar.py into a lambda function
* Set the timeout to at least 30 seconds (at least on first run to give time for the DynamoDB to finish creating)
* Lambda function needs permissions to access dynamo. When creating/choosing a role use the following policy:

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "Stmt1428341300017",
            "Action": [
                "dynamodb:CreateTable",
                "dynamodb:DescribeTable",
                "dynamodb:DeleteItem",
                "dynamodb:GetItem",
                "dynamodb:PutItem",
                "dynamodb:Query",
                "dynamodb:Scan",
                "dynamodb:UpdateItem"
            ],
            "Effect": "Allow",
            "Resource": "*"
        },
        {
            "Sid": "",
            "Resource": "*",
            "Action": [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents"
            ],
            "Effect": "Allow"
        }
    ]
}
```

## Try to:

* Add more payloads and loop to add more than one row at a time into the database.
* Get the payload from s3 file instead of in the code. (Attached is a data dump in csv.)
* Get the payload from the `events` variable in `lambda_handler`.






## Troubleshooting:

* You can see error/success outputs and print statements from a lambda function run in CloudWatch.

